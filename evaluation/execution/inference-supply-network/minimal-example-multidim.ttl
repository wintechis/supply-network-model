@prefix qudt:  <http://qudt.org/schema/qudt/> .
@prefix cur:   <http://qudt.org/vocab/currency/> .
@prefix esn:   <https://example.org/esn/vocab#> .
@prefix isn:   <https://example.org/isn/vocab#> .
@prefix fssn:   <https://example.org/fssn/vocab#> .
@prefix cosn:   <https://example.org/cosn/vocab#> .
@prefix owl:   <http://www.w3.org/2002/07/owl#> .
@prefix xsd:   <http://www.w3.org/2001/XMLSchema#> .
@prefix skos:  <http://www.w3.org/2004/02/skos/core#> .
@prefix rdfs:  <http://www.w3.org/2000/01/rdf-schema#> .
@prefix qb:    <http://purl.org/linked-data/cube#> .
@prefix unit:  <http://qudt.org/vocab/unit/> .
@prefix rdf:   <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix sn:    <https://purl.org/sn/vocab#> .
@prefix time:  <http://www.w3.org/2006/time#> .
@prefix vann:  <http://purl.org/vocab/vann/> .
@prefix greg:  <http://www.w3.org/ns/time/gregorian/> .
@prefix csn:   <https://example.org/csn/vocab#> .
@prefix ex: <https://www.example.org/> .

# sn ontology
sn:Entity a owl:Class .
sn:associatedEntity a owl:SymmetricProperty ;
        rdfs:domain sn:Entity ;
        rdfs:range sn:Entity .

sn:SupplyNetwork rdfs:subClassOf qb:DataSet .
sn:structure rdfs:subPropertyOf qb:structure ;
        rdfs:domain sn:SupplyNetwork ;
        rdfs:range qb:DataStructureDefinition .
sn:SupplyNetworkDataStructure a qb:DataStructureDefinition ;
        qb:component [ qb:dimension sn:from ;
                qb:componentAttachment sn:SupplyLink ] ,
                [ qb:dimension sn:into ;
                qb:componentAttachment sn:SupplyLink ] ,
                [ qb:dimension sn:time ] ,
                [ qb:measure sn:quantity] ,
                [ qb:attribute sn:unit] ;
        qb:sliceKey sn:SNSupplyLink .
sn:higherAbstractionLevel a owl:TransitiveProperty ;
        rdfs:domain qb:DataStructureDefinition ;
        rdfs:range qb:DataStructureDefinition .
sn:similarAbstractionLevel a owl:SymmetricProperty ;
        rdfs:domain qb:DataStructureDefinition ;
        rdfs:range qb:DataStructureDefinition .

sn:supplyLink rdfs:subPropertyOf qb:slice ;
        rdfs:domain sn:SupplyNetwork ;
        rdfs:range sn:SupplyLink .
sn:SupplyLink rdfs:subClassOf qb:Slice .
sn:supplyLinkKey rdfs:subPropertyOf qb:sliceStructure ;
        rdfs:domain sn:SupplyLink ;
        rdfs:range sn:SupplyLinkKey .
sn:SupplyLinkKey rdfs:subClassOf qb:SliceKey .
sn:SNSupplyLink a sn:SupplyLinkKey ;
    qb:componentProperty sn:from , sn:into .
sn:from a owl:FunctionalProperty , qb:DimensionProperty ;
        rdfs:domain sn:SupplyLink ;
        rdfs:range sn:Entity .
sn:into a owl:FunctionalProperty , qb:DimensionProperty ;
        rdfs:domain sn:SupplyLink ;
        rdfs:range sn:Entity .

sn:volume rdfs:subPropertyOf qb:observation ;
        rdfs:domain sn:SupplyLink ;
        rdfs:range sn:Volume .
sn:Volume rdfs:subClassOf qb:Observation .
sn:time a qb:DimensionProperty ;
        rdfs:domain sn:Volume ;
        rdfs:range sn:TemporalEntity .
sn:quantity a qb:MeasureProperty ;
        rdfs:domain sn:Volume ;
        rdfs:range xsd:decimal .
sn:unit a qb:AttributeProperty ;
        rdfs:domain sn:Volume ;
        rdfs:range sn:Unit .


# isn ontology
isn:Industry rdfs:subClassOf sn:Entity .
isn:supply a owl:FunctionalProperty , qb:DimensionProperty ;
        rdfs:subPropertyOf sn:from ;
        rdfs:domain sn:SupplyLink ;
        rdfs:range isn:Industry .
isn:demand a owl:FunctionalProperty , qb:DimensionProperty ;
        rdfs:subPropertyOf sn:into ;
        rdfs:domain sn:SupplyLink ;
        rdfs:range isn:Industry .

isn:IndustryDataStructure a qb:DataStructureDefinition ;
        sn:similarAbstractionLevel fssn:FederalStateDataStructure , csn:CountryDataStructure , cosn:ContinentDataStructure ;
        qb:component [ qb:dimension isn:supply ;
                qb:componentAttachment sn:SupplyLink ] ,
                [ qb:dimension isn:demand ;
                qb:componentAttachment sn:SupplyLink ] ,
                [ qb:dimension sn:time ] ,
                [ qb:measure sn:quantity] ,
                [ qb:attribute sn:unit] ;
        qb:sliceKey isn:IndustrySupplyLinkKey .
isn:IndustrySupplyLinkKey a sn:SupplyLinkKey ;
    qb:componentProperty isn:supply , isn:demand .

isn:IndustryFederalStateDataStructure a qb:DataStructureDefinition ;
        sn:higherAbstractionLevel isn:IndustryDataStructure , fssn:FederalStateDataStructure , csn:CountryDataStructure , cosn:ContinentDataStructure , isn:IndustryCountryDataStructure , isn:IndustryContinentDataStructure ;
        qb:component [ qb:dimension isn:supply ;
                qb:componentAttachment sn:SupplyLink ] ,
                [ qb:dimension isn:demand ;
                qb:componentAttachment sn:SupplyLink ] ,
                [ qb:dimension fssn:export ;
                qb:componentAttachment sn:SupplyLink ] ,
                [ qb:dimension fssn:import  ;
                qb:componentAttachment sn:SupplyLink ] ,
                [ qb:dimension sn:time ] ,
                [ qb:measure sn:quantity] ,
                [ qb:attribute sn:unit] ;
        qb:sliceKey isn:IndustryFederalStateSupplyLinkKey .   
isn:IndustryFederalStateSupplyLinkKey a sn:SupplyLinkKey ;
    qb:componentProperty fssn:export , fssn:import , isn:supply , isn:demand .

isn:IndustryCountryDataStructure a qb:DataStructureDefinition ;
        sn:higherAbstractionLevel isn:IndustryDataStructure , csn:CountryDataStructure , cosn:ContinentDataStructure , isn:IndustryContinentDataStructure ;
        qb:component [ qb:dimension isn:supply ;
                qb:componentAttachment sn:SupplyLink ] ,
                [ qb:dimension isn:demand ;
                qb:componentAttachment sn:SupplyLink ] ,
                [ qb:dimension csn:export ;
                qb:componentAttachment sn:SupplyLink ] ,
                [ qb:dimension csn:import  ;
                qb:componentAttachment sn:SupplyLink ] ,
                [ qb:dimension sn:time ] ,
                [ qb:measure sn:quantity] ,
                [ qb:attribute sn:unit] ;
        qb:sliceKey isn:IndustryCountrySupplyLinkKey .   
isn:IndustryCountrySupplyLinkKey a sn:SupplyLinkKey ;
    qb:componentProperty csn:export , csn:import , isn:supply , isn:demand .

isn:IndustryContinentDataStructure a qb:DataStructureDefinition ;
        sn:higherAbstractionLevel isn:IndustryDataStructure , cosn:ContinentDataStructure ;
        qb:component [ qb:dimension isn:supply ;
                qb:componentAttachment sn:SupplyLink ] ,
                [ qb:dimension isn:demand ;
                qb:componentAttachment sn:SupplyLink ] ,
                [ qb:dimension cosn:export ;
                qb:componentAttachment sn:SupplyLink ] ,
                [ qb:dimension cosn:import  ;
                qb:componentAttachment sn:SupplyLink ] ,
                [ qb:dimension sn:time ] ,
                [ qb:measure sn:quantity] ,
                [ qb:attribute sn:unit] ;
        qb:sliceKey isn:IndustryContinentSupplyLinkKey .   
isn:IndustryContinentSupplyLinkKey a sn:SupplyLinkKey ;
    qb:componentProperty cosn:export , cosn:import , isn:supply , isn:demand .


# fssn ontology
fssn:FederalState rdfs:subClassOf sn:Entity .
fssn:inCountry rdfs:subPropertyOf sn:associatedEntity ;
        rdfs:domain fssn:FederalState ;
        rdfs:range csn:Country .
fssn:inContinent rdfs:subPropertyOf sn:associatedEntity ;
        rdfs:domain fssn:FederalState ;
        rdfs:range cosn:Continent .
fssn:export a owl:FunctionalProperty , qb:DimensionProperty ;
        rdfs:subPropertyOf sn:from ;
        rdfs:domain sn:SupplyLink ;
        rdfs:range fssn:FederalState .
fssn:import a owl:FunctionalProperty , qb:DimensionProperty ;
        rdfs:subPropertyOf sn:into ;
        rdfs:domain sn:SupplyLink ;
        rdfs:range fssn:FederalState .

fssn:FederalStateDataStructure a qb:DataStructureDefinition ;
        sn:higherAbstractionLevel csn:CountryDataStructure , cosn:ContinentDataStructure ;
        qb:component [ qb:dimension fssn:export ;
                qb:componentAttachment sn:SupplyLink ] ,
                [ qb:dimension fssn:import ;
                qb:componentAttachment sn:SupplyLink ] ,
                [ qb:dimension sn:time ] ,
                [ qb:measure sn:quantity] ,
                [ qb:attribute sn:unit] ;
        qb:sliceKey fssn:FederalStateSupplyLinkKey .
fssn:FederalStateSupplyLinkKey a sn:SupplyLinkKey ;
    qb:componentProperty fssn:export , fssn:import .


# csn ontology
csn:Country rdfs:subClassOf sn:Entity .
csn:inContinent rdfs:subPropertyOf sn:associatedEntity ;
        rdfs:domain csn:Country ;
        rdfs:range cosn:Continent .
csn:export a owl:FunctionalProperty , qb:DimensionProperty ;
        rdfs:subPropertyOf sn:from ;
        rdfs:domain sn:SupplyLink ;
        rdfs:range csn:Country .
csn:import a owl:FunctionalProperty , qb:DimensionProperty ;
        rdfs:subPropertyOf sn:into ;
        rdfs:domain sn:SupplyLink ;
        rdfs:range csn:Country .

csn:CountryDataStructure a qb:DataStructureDefinition ;
        qb:component [ qb:dimension csn:export ;
                qb:componentAttachment sn:SupplyLink ] ,
                [ qb:dimension csn:import ;
                qb:componentAttachment sn:SupplyLink ] ,
                [ qb:dimension sn:time ] ,
                [ qb:measure sn:quantity] ,
                [ qb:attribute sn:unit] ;
        qb:sliceKey csn:CountrySupplyLinkKey .
csn:CountrySupplyLinkKey a sn:SupplyLinkKey ;
    qb:componentProperty csn:export , csn:import .


# cosn ontology
cosn:Continent rdfs:subClassOf sn:Entity .
cosn:export a owl:FunctionalProperty , qb:DimensionProperty ;
        rdfs:subPropertyOf sn:from ;
        rdfs:domain sn:SupplyLink ;
        rdfs:range cosn:Continent .
cosn:import a owl:FunctionalProperty , qb:DimensionProperty ;
        rdfs:subPropertyOf sn:into ;
        rdfs:domain sn:SupplyLink ;
        rdfs:range cosn:Continent .

cosn:ContinentDataStructure a qb:DataStructureDefinition ;
        sn:higherAbstractionLevel cosn:ContinentDataStructure ;
        qb:component [ qb:dimension cosn:export ;
                qb:componentAttachment sn:SupplyLink ] ,
                [ qb:dimension cosn:import ;
                qb:componentAttachment sn:SupplyLink ] ,
                [ qb:dimension sn:time ] ,
                [ qb:measure sn:quantity] ,
                [ qb:attribute sn:unit] ;
        qb:sliceKey cosn:ContinentSupplyLinkKey .
cosn:ContinentSupplyLinkKey a sn:SupplyLinkKey ;
    qb:componentProperty cosn:export , cosn:import .


# example data
ex:Data a sn:SupplyNetwork ;
        sn:structure isn:IndustryFederalStateDataStructure ;
        sn:supplyLink ex:AT11ss1AT11ss2 , ex:AT11ss1DE11ss2 .
ex:AT11 a fssn:FederalState ;
        fssn:inCountry ex:AT ;
        fssn:inContinent ex:Europe ;
        rdfs:label "Burgenland"@en , "AT-BL"@en .
ex:AT a csn:Country ;
        rdfs:label "Austria"@en .
ex:Europe a cosn:Continent ;
        rdfs:label "Europe"@en .
ex:DE11 a fssn:FederalState ;
        fssn:inCountry ex:DE ;
        fssn:inContinent ex:Europe ;
        rdfs:label "Stuttgart"@en .
ex:DE a csn:Country ;
        rdfs:label "Germany"@en , "GER"@en .
ex:ss1 a isn:Industry ;
        rdfs:label "Agriculture"@en .
ex:ss2 a isn:Industry ;
        rdfs:label "Mining_quarrying_and_energy_supply"@en .

ex:AT11ss1AT11ss2 a sn:SupplyLink ;
        sn:supplyLinkKey isn:IndustryFederalStateSupplyLinkKey ;
        fssn:export ex:AT11 ;
        isn:supply ex:ss1 ;
        fssn:import ex:AT11 ;
        isn:demand ex:ss2 ;
        sn:volume [ a sn:Volume ;
                sn:time ex:2010 ;
                sn:quantity  1.0 ;
                sn:unit cur:MegaUSD ] ,
                [ a sn:Volume ;
                sn:time ex:2009 ;
                sn:quantity  0.1 ;
                sn:unit cur:MegaUSD ] .

ex:AT11ss1DE11ss2 a sn:SupplyLink ;
        sn:supplyLinkKey isn:IndustryFederalStateSupplyLinkKey ;
        fssn:export ex:AT11 ;
        isn:supply ex:ss1 ;
        fssn:import ex:DE11 ;
        isn:demand ex:ss2 ;
        sn:volume [ a sn:Volume ;
                sn:time ex:2010 ;
                sn:quantity  0.01 ;
                sn:unit cur:MegaUSD ] ,
                [ a sn:Volume ;
                sn:time ex:2009 ;
                sn:quantity  0.001 ;
                sn:unit cur:MegaUSD ] .
